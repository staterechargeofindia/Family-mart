<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Panel</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{margin:0;font-family:Arial;background:#f1f3f6}
header{
  background:#2874f0;color:#fff;padding:12px;
  display:flex;justify-content:space-between;align-items:center
}
header b{font-size:18px}
.container{padding:12px}
.section{
  background:#fff;padding:12px;border-radius:14px;margin-bottom:15px
}
input{width:100%;padding:10px;margin-bottom:10px;border-radius:8px;border:1px solid #ccc}
button{padding:8px 12px;border:none;border-radius:8px;cursor:pointer}
.btn{background:#2874f0;color:#fff}
.btn.red{background:#e53935}
.order.grey{opacity:.6}
</style>
</head>

<body>

<header>
  <span onclick="location.href='index.html'">üè†</span>
  <b>Admin Panel</b>
  <span></span>
</header>

<div class="container">

<!-- ===== MERCHANT CREATE ===== -->
<div class="section">
  <h3>Create Merchant</h3>
  <input id="shopName" placeholder="Shop Name">
  <input id="userId" placeholder="User ID">
  <input id="password" placeholder="Password">
  <button class="btn" onclick="createMerchant()">Create Merchant</button>

  <div id="merchantList" style="margin-top:10px"></div>
</div>

<!-- ===== CATEGORY ===== -->
<div class="section">
  <h3>Categories</h3>
  <input id="newCategory" placeholder="New Category Name">
  <button class="btn" onclick="addCategory()">Add Category</button>
  <div id="categoryList" style="margin-top:10px"></div>
</div>

<!-- ===== ORDERS ===== -->
<div class="section">
  <h3>All Orders</h3>
  <div id="orderList"></div>
</div>

</div>

<script>
/* ===== DATA ===== */
let merchants = JSON.parse(localStorage.getItem("merchants")) || [];
let categories = JSON.parse(localStorage.getItem("categories")) || [];
let orders = JSON.parse(localStorage.getItem("orders")) || [];

/* ===== MERCHANT CREATE ===== */
function createMerchant(){
  if(!shopName.value || !userId.value || !password.value){
    alert("Fill all fields"); return;
  }
  merchants.push({
    shopName: shopName.value,
    userId: userId.value,
    password: password.value
  });
  localStorage.setItem("merchants", JSON.stringify(merchants));
  shopName.value=userId.value=password.value="";
  renderMerchants();
}
function renderMerchants(){
  merchantList.innerHTML="";
  merchants.forEach((m,i)=>{
    merchantList.innerHTML+=`
      <div>
        <b>${m.shopName}</b> ( ${m.userId} )
        <button class="btn red" onclick="deleteMerchant(${i})">Delete</button>
      </div>`;
  });
}
function deleteMerchant(i){
  merchants.splice(i,1);
  localStorage.setItem("merchants",JSON.stringify(merchants));
  renderMerchants();
}

/* ===== CATEGORY ===== */
function addCategory(){
  if(!newCategory.value) return;
  const id=newCategory.value.toLowerCase().replace(/\s+/g,"-");
  categories.push({id:id,name:newCategory.value});
  localStorage.setItem("categories",JSON.stringify(categories));
  newCategory.value="";
  renderCategories();
}
function renderCategories(){
  categoryList.innerHTML="";
  categories.forEach((c,i)=>{
    categoryList.innerHTML+=`
      <div>${c.name}
      <button class="btn red" onclick="deleteCategory(${i})">Delete</button>
      </div>`;
  });
}
function deleteCategory(i){
  categories.splice(i,1);
  localStorage.setItem("categories",JSON.stringify(categories));
  renderCategories();
}

/* ===== ORDERS ===== */
function renderOrders(){
  orderList.innerHTML="";
  orders.forEach((o,i)=>{
    orderList.innerHTML+=`
      <div class="order ${o.status==='Delivered'?'grey':''}">
        <b>${o.productName}</b><br>
        Merchant: ${o.merchant}<br>
        ‚Çπ${o.amount} | ${o.payment}<br>
        Status: ${o.status}<br>
        <button class="btn" onclick="confirmOrder(${i})">Confirm Delivered</button>
      </div>`;
  });
}
function confirmOrder(i){
  orders[i].status="Delivered";
  localStorage.setItem("orders",JSON.stringify(orders));
  renderOrders();
}

/* INIT */
renderMerchants();
renderCategories();
renderOrders();
</script>

</body>
</html>
