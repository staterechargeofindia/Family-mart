<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ISI â€“ Home</title>

<style>
*{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
body{margin:0;background:#f5f6f8}

/* HEADER */
header{
  background:#2874f0;
  color:#fff;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:12px;
  position:sticky;
  top:0;
  z-index:50;
}
header .menu{font-size:22px;cursor:pointer}
header h1{margin:0;font-size:18px}

/* CART BADGE */
.cart{
  font-size:22px;
  cursor:pointer;
  position:relative;
}
#cartCount{
  position:absolute;
  top:-6px;
  right:-8px;
  background:red;
  color:white;
  font-size:12px;
  padding:2px 6px;
  border-radius:50%;
  display:none;
}

/* SEARCH */
.search-box{
  padding:10px;
}
.search-box input{
  width:100%;
  padding:10px;
  border-radius:8px;
  border:1px solid #ccc;
}

/* CATEGORY SCROLL */
.categories{
  display:flex;
  overflow-x:auto;
  padding:10px;
  gap:10px;
}
.categories::-webkit-scrollbar{display:none}
.categories button{
  white-space:nowrap;
  border:none;
  padding:10px 14px;
  border-radius:20px;
  background:#fff;
  cursor:pointer;
  box-shadow:0 1px 4px rgba(0,0,0,0.1);
}
.categories button.active{
  background:#2874f0;
  color:#fff;
}

/* PRODUCT GRID */
.products{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:12px;
  padding:12px;
}
.card{
  background:#fff;
  border-radius:10px;
  overflow:hidden;
  box-shadow:0 2px 6px rgba(0,0,0,0.1);
}
.card img{
  width:100%;
  height:160px;
  object-fit:cover;
  cursor:pointer;
}
.card .info{
  padding:10px;
}
.card h3{
  margin:0 0 5px;
  font-size:14px;
}
.price{
  font-size:15px;
  font-weight:bold;
}
.mrp{
  text-decoration:line-through;
  color:#777;
  font-size:13px;
  margin-left:5px;
}
.off{
  color:green;
  font-size:13px;
  margin-left:5px;
}
.card button{
  width:100%;
  padding:8px;
  margin-top:8px;
  border:none;
  background:#2874f0;
  color:#fff;
  border-radius:6px;
  cursor:pointer;
}

/* MENU DRAWER */
.drawer{
  position:fixed;
  top:0;left:-260px;
  width:260px;
  height:100%;
  background:#fff;
  box-shadow:2px 0 6px rgba(0,0,0,0.2);
  transition:0.3s;
  padding:15px;
  z-index:100;
}
.drawer.active{left:0}
.drawer h3{margin-top:0}
.drawer a{
  display:block;
  padding:10px 0;
  color:#000;
  text-decoration:none;
  border-bottom:1px solid #eee;
}

/* IMAGE ZOOM */
.modal{
  display:none;
  position:fixed;
  top:0;left:0;
  width:100%;height:100%;
  background:rgba(0,0,0,0.8);
  align-items:center;
  justify-content:center;
  z-index:200;
}
.modal img{
  max-width:90%;
  max-height:90%;
}
</style>
</head>

<body>

<header>
  <div class="menu" onclick="toggleMenu()">â˜°</div>
  <h1>ISI</h1>
  <div class="cart" onclick="location.href='cart.html'">
    ðŸ›’ <span id="cartCount">0</span>
  </div>
</header>

<div class="search-box">
  <input type="text" id="search" placeholder="Search products..." oninput="renderProducts()">
</div>

<div class="categories" id="categoryBar"></div>

<div class="products" id="productList"></div>

<!-- DRAWER -->
<div class="drawer" id="drawer">
  <h3>Menu</h3>
  <a href="index.html">Home</a>
  <a href="cart.html">Cart</a>
  <a href="my-orders.html">My Orders</a>
  <a href="manage-address.html">Manage Address</a>
  <a href="merchant-login.html">Merchant</a>
  <a href="admin-panel.html">Admin</a>
</div>

<!-- IMAGE MODAL -->
<div class="modal" id="imgModal" onclick="closeImg()">
  <img id="modalImg">
</div>

<script>
/* CATEGORIES */
const categories=[
 "All","Fashion","Beauty","Electronics","New Phone","Old Phone",
 "Cover","Kids","Home","Vegetables","Fruits","Grocery",
 "Cooked","Meat","Mithai","Biryani","Top Deals"
];

let products = JSON.parse(localStorage.getItem("products")) || [];
let currentCategory="All";

/* CATEGORY BAR */
const catBar=document.getElementById("categoryBar");
categories.forEach((c,i)=>{
  const btn=document.createElement("button");
  btn.textContent=c;
  if(i===0)btn.classList.add("active");
  btn.onclick=()=>selectCategory(c,btn);
  catBar.appendChild(btn);
});

/* SELECT CATEGORY */
function selectCategory(cat,btn){
  currentCategory=cat;
  document.querySelectorAll(".categories button").forEach(b=>b.classList.remove("active"));
  btn.classList.add("active");
  renderProducts();
}

/* RENDER PRODUCTS */
function renderProducts(){
  const list=document.getElementById("productList");
  list.innerHTML="";
  const q=document.getElementById("search").value.toLowerCase();

  const filtered=products.filter(p=>{
    const name=(p.name||"").toLowerCase();
    const cat=p.category||"";
    return (currentCategory==="All"||cat===currentCategory) && name.includes(q);
  });

  if(filtered.length===0){
    list.innerHTML="<p style='grid-column:1/3;text-align:center'>No products available</p>";
    return;
  }

  filtered.forEach(p=>{
    const off = p.mrp ? Math.round(((p.mrp-p.price)/p.mrp)*100) : 0;
    const card=document.createElement("div");
    card.className="card";
    card.innerHTML=`
      <img src="${p.images?.[0]||''}" onclick="zoomImg('${p.images?.[0]||''}')">
      <div class="info">
        <h3>${p.name || "No name"}</h3>
        <div class="price">
          â‚¹${p.price}
          ${p.mrp?`<span class="mrp">â‚¹${p.mrp}</span>`:""}
          ${off?`<span class="off">${off}% OFF</span>`:""}
        </div>
        <button onclick='addToCart(${JSON.stringify(p)})'>Add to Cart</button>
      </div>
    `;
    list.appendChild(card);
  });
}

/* ADD TO CART */
function addToCart(p){
  let cart=JSON.parse(localStorage.getItem("cart"))||[];
  p.qty = p.qty || 1;
  cart.push(p);
  localStorage.setItem("cart",JSON.stringify(cart));
  updateCartCount();
  alert("Added to cart");
}

/* CART COUNT */
function updateCartCount(){
  const cart=JSON.parse(localStorage.getItem("cart"))||[];
  const count=cart.reduce((s,p)=>s+(p.qty||1),0);
  const badge=document.getElementById("cartCount");

  if(count>0){
    badge.style.display="inline-block";
    badge.innerText=count;
  }else{
    badge.style.display="none";
  }
}

/* MENU */
function toggleMenu(){
  document.getElementById("drawer").classList.toggle("active");
}

/* IMAGE ZOOM */
function zoomImg(src){
  if(!src)return;
  modalImg.src=src;
  imgModal.style.display="flex";
}
function closeImg(){
  imgModal.style.display="none";
}

/* INIT */
renderProducts();
updateCartCount();
</script>

</body>
</html>
