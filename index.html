<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Family Mart</title>

  <!-- MAIN CSS (ONLY ONE) -->
  <link rel="stylesheet" href="css/style.css">
</head>

<body>

<!-- ================= SIDE MENU ================= -->
<div id="menu" class="side-menu">
  <a href="login.html" data-en="Profile" data-hi="à¤ªà¥à¤°à¥‹à¤«à¤¼à¤¾à¤‡à¤²">Profile</a>
  <a href="cart.html" data-en="My Cart" data-hi="à¤®à¥‡à¤°à¤¾ à¤•à¤¾à¤°à¥à¤Ÿ">My Cart</a>
  <a href="#" data-en="My Orders" data-hi="à¤®à¥‡à¤°à¥‡ à¤‘à¤°à¥à¤¡à¤°">My Orders</a>
  <a href="#" data-en="Address" data-hi="à¤ªà¤¤à¤¾">Address</a>
  <a href="merchant-login.html"><b data-en="Merchant" data-hi="à¤µà¥à¤¯à¤¾à¤ªà¤¾à¤°à¥€">Merchant</b></a>
  <a href="admin.html"><b>Admin</b></a>
</div>

<!-- ================= HEADER ================= -->
<header style="display:flex;align-items:center;justify-content:space-between;">
  <span onclick="toggleMenu()" style="font-size:22px;cursor:pointer;">â˜°</span>

  <img src="assets/logo.png" alt="Family Mart" height="32">

  <div style="display:flex;align-items:center;gap:10px;">
    <button class="lang-btn" onclick="toggleLang()">Hindi</button>
    <a href="cart.html" style="color:white;text-decoration:none;">
      ðŸ›’ <span id="cartCount">0</span>
    </a>
  </div>
</header>

<!-- ================= PRODUCT LIST ================= -->
<div id="productList" class="products"></div>

<!-- ================= JS FILES (NO DUPLICATE) ================= -->
<script src="js/main.js"></script>
<script src="js/cart.js"></script>

<!-- ================= PAGE LOGIC ================= -->
<script>
  const productDiv = document.getElementById("productList");
  const products = JSON.parse(localStorage.getItem("products")) || [];

  if (products.length === 0) {
    productDiv.innerHTML = `
      <div class="card">
        <p class="small" data-en="No products available"
           data-hi="à¤•à¥‹à¤ˆ à¤ªà¥à¤°à¥‹à¤¡à¤•à¥à¤Ÿ à¤‰à¤ªà¤²à¤¬à¥à¤§ à¤¨à¤¹à¥€à¤‚ à¤¹à¥ˆ">
           No products available
        </p>
      </div>
    `;
  } else {
    products.forEach(p => {
      productDiv.innerHTML += `
        <div class="card-product">
          <img src="${p.image ? p.image : 'assets/placeholder.png'}">
          <p><b>${p.name}</b></p>
          <div class="price">â‚¹${p.price}</div>
          <button class="btn btn-warning"
            onclick="addToCart('${p.name}', ${p.price})"
            data-en="Add to Cart"
            data-hi="à¤•à¤¾à¤°à¥à¤Ÿ à¤®à¥‡à¤‚ à¤œà¥‹à¤¡à¤¼à¥‡à¤‚">
            Add to Cart
          </button>
          <div class="small">Sold by: ${p.merchant}</div>
        </div>
      `;
    });
  }

  // update cart count safely
  updateCartCount();
</script>

</body>
</html>
