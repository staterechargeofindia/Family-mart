<!DOCTYPE html>
<html>
<head>
  <title>ISI ‚Äì Online Store</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/style.css">
</head>

<body>

<!-- SIDE MENU -->
<div id="menu" class="side-menu">
  <a href="profile.html">My Profile</a>
  <a href="cart.html">My Cart</a>
  <a href="merchant.html"><b>Merchant</b></a>
  <a href="admin.html"><b>Admin</b></a>
</div>

<!-- HEADER -->
<header style="display:flex;align-items:center;justify-content:space-between">
  <span id="menuBtn" style="font-size:22px;cursor:pointer">‚ò∞</span>
  <b>ISI</b>
  <span onclick="location.href='index.html'" style="font-size:22px;cursor:pointer">üè†</span>
</header>

<!-- PRODUCTS -->
<div class="products" id="productList"></div>

<script src="js/main.js"></script>
<script src="js/cart.js"></script>

<script>
const products = JSON.parse(localStorage.getItem("products")) || [];
const box = document.getElementById("productList");

if (products.length === 0) {
  box.innerHTML = `<div class="card">No products available</div>`;
}

products.forEach((p, idx) => {
  box.innerHTML += `
  <div class="card-product">

    <!-- SLIDER -->
    <div class="slider" id="slider-${idx}">
      <img src="${p.images[0]}" class="slide active" onclick="zoom('${p.images[0]}')">
      <img src="${p.images[1]}" class="slide" onclick="zoom('${p.images[1]}')">
    </div>

    <b>${p.name}</b>
    <p style="font-size:13px;color:#555">${p.desc}</p>

    <div class="price">
      ‚Çπ${p.price}
      <del>‚Çπ${p.mrp}</del>
      <span style="color:green">${p.discount}% OFF</span>
    </div>

    <button onclick="addToCart('${p.name}',${p.price},'${p.merchant}')">
      Add to Cart
    </button>

    <small>Sold by ${p.merchant}</small>
  </div>
  `;
});

/* CART COUNT */
updateCartCount();

/* IMAGE SLIDER AUTO */
document.querySelectorAll(".slider").forEach(slider=>{
  let i=0;
  const slides = slider.querySelectorAll(".slide");
  setInterval(()=>{
    slides[i].classList.remove("active");
    i=(i+1)%slides.length;
    slides[i].classList.add("active");
  },3000);
});

/* ZOOM */
function zoom(src){
  const o=document.createElement("div");
  o.style=`position:fixed;top:0;left:0;width:100%;height:100%;
  background:black;display:flex;align-items:center;justify-content:center;z-index:9999`;
  o.innerHTML=`<img src="${src}" style="max-width:95%;max-height:95%">`;
  o.onclick=()=>document.body.removeChild(o);
  document.body.appendChild(o);
}
</script>

<style>
.slider{position:relative;height:160px;overflow:hidden}
.slide{position:absolute;width:100%;height:160px;object-fit:cover;display:none}
.slide.active{display:block}
</style>

</body>
</html>
