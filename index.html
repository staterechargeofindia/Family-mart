<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ISI Marketplace</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
*{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
html,body{
  margin:0;padding:0;width:100%;height:100%;
  overflow-y:auto;background:#f4f6f8;
}

/* ================= HEADER ================= */
header{
  position:sticky;top:0;z-index:50;
  background:#2f78ff;color:#fff;
  padding:12px;
  display:flex;align-items:center;justify-content:space-between;
}
header .left{display:flex;align-items:center;gap:10px}
header .menu{font-size:22px;cursor:pointer}
header .title{font-size:20px;font-weight:bold}
header .cart{font-size:22px;cursor:pointer}

/* ================= SEARCH ================= */
.search-box{padding:10px;background:#f4f6f8}
.search-box input{
  width:100%;padding:12px;border-radius:10px;
  border:1px solid #ccc;font-size:16px;
}

/* ================= CATEGORIES ================= */
.categories{
  display:flex;gap:10px;padding:10px;
  overflow-x:auto;background:#f4f6f8;
}
.categories::-webkit-scrollbar{display:none}
.cat{
  background:#fff;padding:8px 16px;border-radius:20px;
  font-size:14px;white-space:nowrap;cursor:pointer;
  border:1px solid #e0e0e0;
}

/* ================= PRODUCTS ================= */
.products{
  display:grid;grid-template-columns:repeat(2,1fr);
  gap:12px;padding:12px;
}
.card{
  background:#fff;border-radius:12px;overflow:hidden;
  box-shadow:0 2px 6px rgba(0,0,0,.08);
}
.card img{
  width:100%;height:160px;object-fit:cover;cursor:pointer;
}
.card .info{padding:10px}
.card h4{margin:0;font-size:15px}
.card p{margin:4px 0;font-size:13px;color:#555}
.price{font-size:15px;font-weight:bold}
.old{margin-left:6px;text-decoration:line-through;color:#999;font-size:12px}
.off{margin-left:6px;color:green;font-size:12px}
.btn{
  width:100%;padding:8px;margin-top:6px;
  border:none;border-radius:8px;cursor:pointer;font-size:14px;
}
.btn.add{background:#2f78ff;color:#fff}
.btn.desc{background:#eee;color:#000}

/* ================= EMPTY ================= */
.empty{text-align:center;padding:40px;color:#777}

/* ================= SIDE MENU ================= */
#sideMenu{
  position:fixed;top:0;left:-260px;width:260px;height:100%;
  background:#fff;box-shadow:2px 0 10px rgba(0,0,0,.3);
  transition:.3s;z-index:1000;padding:15px;
}
#sideMenu h3{margin-top:0}
#sideMenu p{
  padding:10px 0;border-bottom:1px solid #eee;cursor:pointer;
}

/* ================= IMAGE ZOOM ================= */
#imgZoom{
  position:fixed;inset:0;background:rgba(0,0,0,.8);
  display:none;align-items:center;justify-content:center;z-index:2000;
}
#imgZoom img{max-width:90%;max-height:90%;border-radius:10px}

/* ================= DESCRIPTION MODAL ================= */
#descModal{
  position:fixed;inset:0;background:rgba(0,0,0,.7);
  display:none;align-items:center;justify-content:center;z-index:2000;
}
#descModal .box{
  background:#fff;width:90%;max-height:80%;
  overflow:auto;border-radius:14px;padding:15px;
}
.close{text-align:right;font-size:22px;cursor:pointer}
</style>
</head>

<body>

<!-- ===== SIDE MENU ===== -->
<div id="sideMenu">
  <h3>Menu</h3>
  <p onclick="go('index.html')">üè† Home</p>
  <p onclick="go('manage-address.html')">üìç Manage Address</p>
  <p onclick="go('cart.html')">üõí Cart</p>
  <p onclick="go('my-orders.html')">üì¶ My Orders</p>
  <p onclick="go('merchant-login.html')">üè™ Merchant</p>
  <p onclick="go('admin-login.html')">üõ† Admin</p>
</div>

<!-- ===== HEADER ===== -->
<header>
  <div class="left">
    <div class="menu" onclick="toggleMenu()">‚ò∞</div>
    <div class="title">ISI</div>
  </div>
  <div class="cart" onclick="go('cart.html')">üõí</div>
</header>

<!-- ===== SEARCH ===== -->
<div class="search-box">
  <input type="text" placeholder="Search products..." oninput="searchProducts(this.value)">
</div>

<!-- ===== CATEGORIES (OLD + NEW ALL) ===== -->
<div class="categories">
  <div class="cat" onclick="filterCategory('all')">All</div>
  <div class="cat" onclick="filterCategory('fashion')">Fashion</div>
  <div class="cat" onclick="filterCategory('beauty')">Beauty</div>
  <div class="cat" onclick="filterCategory('electronics')">Electronics</div>
  <div class="cat" onclick="filterCategory('kids')">Kids</div>
  <div class="cat" onclick="filterCategory('home')">Home</div>
  <div class="cat" onclick="filterCategory('top-deals')">Top Deals</div>
  <div class="cat" onclick="filterCategory('new-phone')">New Phone</div>
  <div class="cat" onclick="filterCategory('old-phone')">Old Phone</div>
  <div class="cat" onclick="filterCategory('cover')">Mobile Cover</div>
  <div class="cat" onclick="filterCategory('grocery')">Grocery</div>
  <div class="cat" onclick="filterCategory('vegetable')">Vegetable</div>
  <div class="cat" onclick="filterCategory('fruits')">Fruits</div>
  <div class="cat" onclick="filterCategory('cooked')">Cooked</div>
  <div class="cat" onclick="filterCategory('meat')">Meat</div>
  <div class="cat" onclick="filterCategory('mithai')">Mithai</div>
  <div class="cat" onclick="filterCategory('biryani')">Biryani</div>
</div>

<!-- ===== PRODUCTS ===== -->
<div id="productBox" class="products"></div>
<div id="emptyBox" class="empty" style="display:none">No products available</div>

<!-- ===== IMAGE ZOOM ===== -->
<div id="imgZoom" onclick="this.style.display='none'">
  <img id="zoomImg">
</div>

<!-- ===== DESCRIPTION ===== -->
<div id="descModal">
  <div class="box">
    <div class="close" onclick="closeDesc()">‚úñ</div>
    <h3 id="descName"></h3>
    <p id="descText"></p>
  </div>
</div>

<script>
/* ===== MENU ===== */
let menuOpen=false;
function toggleMenu(){
  const m=document.getElementById("sideMenu");
  m.style.left = menuOpen ? "-260px" : "0";
  menuOpen=!menuOpen;
}
function go(p){location.href=p;}

/* ===== DATA ===== */
let products = JSON.parse(localStorage.getItem("products")) || [];
let currentCategory="all";

/* ===== RENDER ===== */
function render(list){
  const box=document.getElementById("productBox");
  const empty=document.getElementById("emptyBox");
  box.innerHTML="";
  if(list.length===0){empty.style.display="block";return;}
  empty.style.display="none";

  list.forEach(p=>{
    const off=p.mrp?Math.round(((p.mrp-p.price)/p.mrp)*100):0;
    box.innerHTML+=`
      <div class="card">
        <img src="${p.images[0]}" onclick="zoomImage('${p.images[0]}')">
        <div class="info">
          <h4>${p.name}</h4>
          <p>${p.description||""}</p>
          <div class="price">
            ‚Çπ${p.price}
            ${p.mrp?`<span class="old">‚Çπ${p.mrp}</span>`:""}
            ${off?`<span class="off">${off}% OFF</span>`:""}
          </div>
          <button class="btn add" onclick='addToCart(${JSON.stringify(p)})'>Add to Cart</button>
          <button class="btn desc" onclick="showDesc('${p.name.replace(/'/g,"")}','${(p.description||"").replace(/'/g,"")}')">Description</button>
        </div>
      </div>`;
  });
}

/* ===== FILTER ===== */
function filterCategory(cat){
  currentCategory=cat;
  if(cat==="all"){render(products);return;}
  render(products.filter(p=>p.category===cat));
}

/* ===== SEARCH ===== */
function searchProducts(q){
  q=q.toLowerCase();
  render(products.filter(p=>p.name.toLowerCase().includes(q)));
}

/* ===== CART ===== */
function addToCart(p){
  let cart=JSON.parse(localStorage.getItem("cart"))||[];
  cart.push(p);
  localStorage.setItem("cart",JSON.stringify(cart));
  alert("Added to cart");
}

/* ===== IMAGE ZOOM ===== */
function zoomImage(src){
  document.getElementById("zoomImg").src=src;
  document.getElementById("imgZoom").style.display="flex";
}

/* ===== DESCRIPTION ===== */
function showDesc(n,d){
  document.getElementById("descName").innerText=n;
  document.getElementById("descText").innerText=d;
  document.getElementById("descModal").style.display="flex";
}
function closeDesc(){
  document.getElementById("descModal").style.display="none";
}

/* ===== INIT ===== */
render(products);
</script>

</body>
</html>
