<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ISI ‚Äì Home</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ===== GLOBAL ===== */
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:#f1f3f6;
  overflow-x:hidden;
}

/* ===== HEADER ===== */
header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:12px;
  background:#2874f0;
  color:#fff;
}
header b{font-size:18px}

/* ===== MENU ===== */
#menu{
  position:fixed;
  top:0;
  left:-260px;
  width:250px;
  height:100%;
  background:#fff;
  z-index:9999;
  padding:15px;
  transition:.3s;
  box-shadow:2px 0 12px rgba(0,0,0,.2);
}
#menu a{
  display:block;
  padding:12px 0;
  border-bottom:1px solid #eee;
  color:#000;
}
#menu h3{margin-top:5px}

/* ===== OVERLAY ===== */
#overlay{
  display:none;
  position:fixed;
  top:0;left:0;
  width:100%;height:100%;
  background:rgba(0,0,0,0.5);
  z-index:9998;
}

/* ===== SEARCH ===== */
.search-box{
  padding:10px;
  background:#fff;
}
.search-box input{
  width:100%;
  padding:12px;
  border-radius:10px;
  border:1px solid #ccc;
  font-size:15px;
}

/* ===== IMAGE BANNER ===== */
.img-banner{
  margin:10px;
  overflow:hidden;
  border-radius:18px;
}
.img-track{
  display:flex;
  width:300%;
  animation:bannerSlide 12s infinite;
}
.img-track img{
  width:100%;
  height:170px;
  object-fit:cover;
}
@keyframes bannerSlide{
  0%{transform:translateX(0)}
  33%{transform:translateX(-100%)}
  66%{transform:translateX(-200%)}
  100%{transform:translateX(0)}
}

/* ===== DEAL ICONS ===== */
.deal-icons{
  display:grid;
  grid-template-columns:repeat(5,1fr);
  gap:10px;
  background:#fff;
  margin:10px;
  padding:14px;
  border-radius:18px;
  text-align:center;
}
.deal{
  font-size:22px;
  cursor:pointer;
}
.deal span{
  display:block;
  font-size:11px;
  margin-top:4px;
}
.deal:active{transform:scale(.9)}

/* ===== CATEGORY ===== */
.category-btn{
  margin:10px;
}
.category-btn button{
  width:100%;
  padding:14px;
  border-radius:16px;
  border:none;
  background:linear-gradient(135deg,#ff9800,#ff5722);
  color:white;
  font-size:16px;
  font-weight:bold;
}
#categoryBox{
  display:none;
  margin-top:8px;
  background:#fff;
  border-radius:14px;
  overflow:hidden;
}
.cat{
  padding:12px;
  border-bottom:1px solid #eee;
  cursor:pointer;
}
.cat:hover{background:#f1f1f1}

/* ===== PRODUCTS ===== */
#productList{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:12px;
  padding:10px;
}
.card-product{
  background:#fff;
  padding:8px;
  border-radius:14px;
}

/* ===== SLIDER ===== */
.slider{
  position:relative;
  height:140px;
  overflow:hidden;
  border-radius:12px;
}
.slide{
  position:absolute;
  width:100%;
  height:140px;
  object-fit:cover;
  display:none;
}
.slide.active{display:block}
.nav{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  background:rgba(0,0,0,.5);
  color:#fff;
  padding:4px 8px;
  border-radius:50%;
  cursor:pointer;
}
.nav.left{left:6px}
.nav.right{right:6px}
.dots{
  position:absolute;
  bottom:4px;
  width:100%;
  text-align:center;
}
.dot{
  height:6px;width:6px;
  background:#ccc;
  border-radius:50%;
  display:inline-block;
  margin:0 2px;
}
.dot.active{background:#fff}

/* ===== BUTTON ===== */
button.add{
  width:100%;
  padding:8px;
  background:#2874f0;
  color:white;
  border:none;
  border-radius:8px;
  margin-top:6px;
}
.price del{color:#888;font-size:12px}
.off{color:green;font-size:12px}
</style>
</head>

<body>

<!-- ===== OVERLAY ===== -->
<div id="overlay" onclick="toggleMenu()"></div>

<!-- ===== MENU ===== -->
<div id="menu">
  <span onclick="toggleMenu()" style="float:right;font-size:20px;cursor:pointer">‚ùå</span>
  <h3>Menu</h3>
  <a href="profile.html" onclick="toggleMenu()">My Profile</a>
  <a href="my-orders.html" onclick="toggleMenu()">My Orders</a>
  <a href="cart.html" onclick="toggleMenu()">My Cart</a>
  <a href="merchant-login.html" onclick="toggleMenu()">Merchant</a>
  <a href="admin.html" onclick="toggleMenu()">Admin</a>
</div>

<!-- ===== HEADER ===== -->
<header>
  <span onclick="toggleMenu()" style="font-size:22px;cursor:pointer">‚ò∞</span>
  <b>ISI</b>
  <span onclick="location.href='cart.html'" style="font-size:22px;cursor:pointer">
    üõí <span id="cartCount">0</span>
  </span>
</header>

<!-- ===== SEARCH ===== -->
<div class="search-box">
  <input id="searchInput" onkeyup="searchProducts()" placeholder="Search products...">
</div>

<!-- ===== BANNER ===== -->
<div class="img-banner">
  <div class="img-track">
    <img src="assets/banner1.jpg">
    <img src="assets/banner2.jpg">
    <img src="assets/banner3.jpg">
  </div>
</div>

<!-- ===== DEAL ICONS ===== -->
<div class="deal-icons">
  <div class="deal" onclick="filterCategory('beauty')">üíÑ<span>Beauty</span></div>
  <div class="deal" onclick="filterCategory('jeans')">üëñ<span>Jeans</span></div>
  <div class="deal" onclick="filterCategory('kurti')">üëó<span>Kurti</span></div>
  <div class="deal" onclick="filterCategory('jacket')">üß•<span>Jacket</span></div>
  <div class="deal" onclick="filterCategory('kids')">üßí<span>Kids</span></div>
</div>

<!-- ===== CATEGORY BUTTON ===== -->
<div class="category-btn">
  <button onclick="toggleCategory()">üìÇ Browse Categories</button>
  <div id="categoryBox"></div>
</div>

<!-- ===== PRODUCTS ===== -->
<div id="productList"></div>

<script>
/* MENU */
function toggleMenu(){
  const m=document.getElementById("menu");
  const o=document.getElementById("overlay");
  if(m.style.left==="0px"){
    m.style.left="-260px";
    o.style.display="none";
  }else{
    m.style.left="0px";
    o.style.display="block";
  }
}

/* CART COUNT */
function updateCartCount(){
  const cart=JSON.parse(localStorage.getItem("cart"))||[];
  document.getElementById("cartCount").innerText=cart.length;
}
updateCartCount();

/* LOAD DATA */
const products=JSON.parse(localStorage.getItem("products"))||[];
const categories=JSON.parse(localStorage.getItem("categories"))||[];
const box=document.getElementById("productList");
const catBox=document.getElementById("categoryBox");

/* CATEGORY LIST (DISPLAY NAME) */
catBox.innerHTML=`<div class="cat" onclick="filterCategory('all')">All Products</div>`;
categories.forEach(c=>{
  catBox.innerHTML+=`<div class="cat" onclick="filterCategory('${c.id}')">${c.name}</div>`;
});

/* NO PRODUCTS */
if(products.length===0){
  box.innerHTML=`
  <div style="grid-column:1/3;background:#fff;padding:30px;border-radius:16px;text-align:center">
    <div style="font-size:50px">üõçÔ∏è</div>
    <h2>Welcome to ISI</h2>
    <p>Products will appear once merchants publish them.</p>
  </div>`;
}

/* RENDER PRODUCTS */
products.forEach((p,i)=>{
  box.innerHTML+=`
  <div class="card-product" data-category="${p.category}">
    <div class="slider">
      <img src="${p.images[0]}" class="slide active" id="i1-${i}">
      <img src="${p.images[1]}" class="slide" id="i2-${i}">
      <span class="nav left" onclick="toggleImg(${i})">‚Äπ</span>
      <span class="nav right" onclick="toggleImg(${i})">‚Ä∫</span>
      <div class="dots">
        <span class="dot active" id="d1-${i}"></span>
        <span class="dot" id="d2-${i}"></span>
      </div>
    </div>
    <b>${p.name}</b>
    <div class="price">
      ‚Çπ${p.price} <del>‚Çπ${p.mrp}</del>
      <span class="off">${p.discount}% OFF</span>
    </div>
    <button class="add" onclick="addToCart('${p.name}',${p.price},'${p.merchant}')">Add to Cart</button>
  </div>`;
});

/* SLIDER */
function toggleImg(i){
  const a=document.getElementById(`i1-${i}`);
  const b=document.getElementById(`i2-${i}`);
  const d1=document.getElementById(`d1-${i}`);
  const d2=document.getElementById(`d2-${i}`);
  const show=!a.classList.contains("active");
  a.classList.toggle("active",show);
  b.classList.toggle("active",!show);
  d1.classList.toggle("active",show);
  d2.classList.toggle("active",!show);
}

/* SEARCH */
function searchProducts(){
  const k=searchInput.value.toLowerCase();
  document.querySelectorAll(".card-product").forEach(c=>{
    c.style.display=c.innerText.toLowerCase().includes(k)?"block":"none";
  });
}

/* CATEGORY */
function toggleCategory(){
  catBox.style.display=(catBox.style.display==="block")?"none":"block";
}
function filterCategory(cat){
  document.querySelectorAll(".card-product").forEach(c=>{
    c.style.display=(cat==="all"||c.dataset.category===cat)?"block":"none";
  });
  catBox.style.display="none";
}

/* CART */
function addToCart(n,p,m){
  const c=JSON.parse(localStorage.getItem("cart"))||[];
  c.push({name:n,price:p,merchant:m});
  localStorage.setItem("cart",JSON.stringify(c));
  updateCartCount();
  alert("Added to cart");
}
</script>

</body>
</html>
