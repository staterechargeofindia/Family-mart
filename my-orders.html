<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>My Orders</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body style="margin:0;font-family:Arial;background:#f1f3f6">

<!-- ================= HEADER ================= -->
<header style="
display:flex;align-items:center;justify-content:space-between;
padding:12px;background:#2874f0;color:white">
  <span onclick="history.back()" style="font-size:22px;cursor:pointer">â¬…ï¸</span>
  <b>My Orders</b>
  <span onclick="location.href='index.html'" style="font-size:22px;cursor:pointer">ğŸ </span>
</header>

<div style="padding:10px">

<div class="card">
  <h3>Your Orders</h3>
  <div id="ordersBox"></div>
</div>

</div>

<script>
const profile = JSON.parse(localStorage.getItem("profile")) || {};
const orders = JSON.parse(localStorage.getItem("orders")) || [];
const box = document.getElementById("ordersBox");

/* FILTER ORDERS BY USER (MOBILE NUMBER) */
const myOrders = orders.filter(o =>
  o.customer && o.customer.mobile === profile.mobile
);

if(myOrders.length === 0){
  box.innerHTML = "<p>No orders found</p>";
}

/* RENDER ORDERS */
myOrders.forEach(o=>{
  box.innerHTML += `
    <div style="
      background:#fafafa;
      padding:10px;
      margin-bottom:10px;
      border-radius:8px;
      ${o.status==='Delivered'?'opacity:0.6':''}
    ">
      <b>Order ID:</b> ${o.id}<br>
      <b>Date:</b> ${o.created}<br>
      <b>Status:</b> ${o.status}<br>
      <b>Payment:</b> ${o.payment}<br>
      <b>Total:</b> â‚¹${o.amount}<br><br>

      <b>Items:</b><br>
      ${o.items.map(i=>`${i.name} â€“ â‚¹${i.price}`).join("<br>")}
    </div>
  `;
});
</script>

<style>
.card{
  background:#fff;
  padding:15px;
  border-radius:10px;
}
</style>

</body>
</html>
